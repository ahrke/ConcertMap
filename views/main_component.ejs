<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Home Page</title>

    <link rel="stylesheet" href="/vendor/normalize-4.1.1.css" type="text/css" />
    <link rel="stylesheet" href="/vendor/border-box.css" type="text/css" />
    <link rel="stylesheet" href="/styles/layout.css" type="text/css" />
    <link rel="stylesheet" href="/styles/artist.css" type="text/css" />
    <link rel="stylesheet" href="/styles/main_component.css" type="text/css" />
    <link rel="stylesheet" href="/styles/list_area.css" type="text/css" />
    <link href="https://fonts.googleapis.com/css?family=Raleway&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <script type="text/javascript" src="/vendor/jquery-3.0.0.js"></script>
    <script type="text/javascript" src="/scripts/app.js"></script>
    <script type="text/javascript" src="/scripts/spotify.js"></script>
    <script type="text/javascript" src="/scripts/songkick.js"></script>
    <script type="text/javascript" src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  </head>

  <body>
    <% include partials/__nav %>

    <div id="mainArea">
      <section id="listArea" class='scroll'>

        <h1>listArea</h1>
        <ul>
          <% for (let concert of concerts) { %>
            <li>
              <div class='concertListing'>
                <img src='<%= concert.image640 %>'>
                <p>
                  <%= concert.concertName %>
                  <%= concert.start.date %>
                  <%= concert.start.time %>
                </p>
              </div>
            </li>
          <% } %>
        </ul>
        <h2>

        </h2>
      </section>


      <section id="artistArea" class='scroll'>
        <div id="artists"></div>
      </section>


      <section id="mapArea">

        <h1>mapArea</h1>
      </section>

    </main>

    <script type="text/javascript">
      let concerts = "<%= concerts.map(concert => concert.performers.map(performer => performer.displayName.replace(/[^a-zA-Z ]/g, ''))).join(', ') %>".split(',')
      console.log(concerts)
      function getHashParams() {
        var hashParams = {};
        var e, r = /([^&;=]+)=?([^&;]*)/g,
        q = window.location.hash.substring(1);
        while ( e = r.exec(q)) {
          hashParams[e[1]] = decodeURIComponent(e[2]);
        }
        return hashParams;
      }

      let hashParams = {};

      if (window.location.hash) {
        hashParams = getHashParams();
      }

      let artist = {}


      getArtistsInfo(concerts,hashParams.access_token)
        .then(res => {
          $("#artistArea").css('display','flex');
            artistsDisplay(res);

        })

    </script>
  </body>
</html>
